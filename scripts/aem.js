function sampleRUM(e,t={}){sampleRUM.defer=sampleRUM.defer||[];const a=e=>{sampleRUM[e]=sampleRUM[e]||((...t)=>sampleRUM.defer.push({fnname:e,args:t}))};sampleRUM.drain=sampleRUM.drain||((e,t)=>{sampleRUM[e]=t,sampleRUM.defer.filter((({fnname:t})=>e===t)).forEach((({fnname:e,args:t})=>sampleRUM[e](...t)))}),sampleRUM.always=sampleRUM.always||[],sampleRUM.always.on=(e,t)=>{sampleRUM.always[e]=t},sampleRUM.on=(e,t)=>{sampleRUM.cases[e]=t},a("observe"),a("cwv");try{if(window.hlx=window.hlx||{},!window.hlx.rum){const e="on"===new URLSearchParams(window.location.search).get("rum")?1:100,t=Array.from({length:75},((e,t)=>String.fromCharCode(48+t))).filter((e=>/\d|[A-Z]/i.test(e))).filter((()=>75*Math.random()>70)).join(""),a=Math.random(),o=a*e<1,n=Date.now(),s={full:()=>window.location.href,origin:()=>window.location.origin,path:()=>window.location.href.replace(/\?.*$/,"")};window.hlx.rum={weight:e,id:t,random:a,isSelected:o,firstReadTime:n,sampleRUM:sampleRUM,sanitizeURL:s[window.hlx.RUM_MASK_URL||"path"]}}const{weight:a,id:o,firstReadTime:n}=window.hlx.rum;if(window.hlx&&window.hlx.rum&&window.hlx.rum.isSelected){const s=["weight","id","referer","checkpoint","t","source","target","cwv","CLS","FID","LCP","INP"],c=(c=t)=>{const l=JSON.stringify({weight:a,id:o,referer:window.hlx.rum.sanitizeURL(),checkpoint:e,t:Date.now()-n,...t},s),r=`https://rum.hlx.page/.rum/${a}`;
navigator.sendBeacon(r,l),console.debug(`ping:${e}`,c)};sampleRUM.cases=sampleRUM.cases||{cwv:()=>sampleRUM.cwv(t)||!0,lazy:()=>{const e=document.createElement("script");return e.src="https://rum.hlx.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js",document.head.appendChild(e),!0}},c(t),sampleRUM.cases[e]&&sampleRUM.cases[e]()}sampleRUM.always[e]&&sampleRUM.always[e](t)}catch(e){}}function setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse="on"===new URLSearchParams(window.location.search).get("lighthouse");const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(e){console.log(e)}}function init(){setup(),sampleRUM("top"),window.addEventListener("load",(()=>sampleRUM("load"))),window.addEventListener("unhandledrejection",(e=>{sampleRUM("error",{source:e.reason.sourceURL,target:e.reason.line})})),window.addEventListener("error",(e=>{sampleRUM("error",{source:e.filename,target:e.lineno})}))}function toClassName(e){return"string"==typeof e?e.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function toCamelCase(e){return toClassName(e).replace(/-([a-z])/g,(e=>e[1].toUpperCase()))}function readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach((e=>{if(e.children){const a=[...e.children];if(a[1]){const o=a[1],n=toClassName(a[0].textContent);let s="";if(o.querySelector("a")){const e=[...o.querySelectorAll("a")];s=1===e.length?e[0].href:e.map((e=>e.href))}else if(o.querySelector("img")){const e=[...o.querySelectorAll("img")];s=1===e.length?e[0].src:e.map((e=>e.src))}else if(o.querySelector("p")){const e=[...o.querySelectorAll("p")];s=1===e.length?e[0].textContent:e.map((e=>e.textContent))}else s=e.children[1].textContent;t[n]=s}}})),t}async function loadCSS(e){return new Promise(((t,a)=>{if(document.querySelector(`head > link[href="${e}"]`))t();else{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=t,o.onerror=a,document.head.append(o)}}))}async function loadScript(e,t){return new Promise(((a,o)=>{if(document.querySelector(`head > script[src="${e}"]`))a();else{const n=document.createElement("script");if(n.src=e,t)for(const e in t)n.setAttribute(e,t[e]);n.onload=a,n.onerror=o,document.head.append(n)}}))}function getMetadata(e,t=document){const a=e&&e.includes(":")?"property":"name";return[...t.head.querySelectorAll(`meta[${a}="${e}"]`)].map((e=>e.content)).join(", ")||""}function createOptimizedPicture(e,t="",a=!1,o=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]){const n=new URL(e,window.location.href),s=document.createElement("picture"),{pathname:c}=n,l=c.substring(c.lastIndexOf(".")+1);return o.forEach((e=>{const t=document.createElement("source");e.media&&t.setAttribute("media",e.media),t.setAttribute("type","image/webp"),t.setAttribute("srcset",`${c}?width=${e.width}&format=webply&optimize=medium`),s.appendChild(t)})),o.forEach(((e,n)=>{if(n<o.length-1){const t=document.createElement("source");e.media&&t.setAttribute("media",e.media),t.setAttribute("srcset",`${c}?width=${e.width}&format=${l}&optimize=medium`),s.appendChild(t)}else{const o=document.createElement("img");o.setAttribute("loading",a?"eager":"lazy"),o.setAttribute("alt",t),s.appendChild(o),o.setAttribute("src",`${c}?width=${e.width}&format=${l}&optimize=medium`)}})),s}function decorateTemplateAndTheme(){const e=(e,t)=>{t.split(",").forEach((t=>{e.classList.add(toClassName(t.trim()))}))},t=getMetadata("template");t&&e(document.body,t);const a=getMetadata("theme");a&&e(document.body,a)}function decorateButtons(e){e.querySelectorAll("a").forEach((e=>{if(e.title=e.title||e.textContent,e.href!==e.textContent){const t=e.parentElement,a=e.parentElement.parentElement;e.querySelector("img")||(1!==t.childNodes.length||"P"!==t.tagName&&"DIV"!==t.tagName||(e.className="button",t.classList.add("button-container")),1===t.childNodes.length&&"STRONG"===t.tagName&&1===a.childNodes.length&&"P"===a.tagName&&(e.className="button primary",a.classList.add("button-container")),1===t.childNodes.length&&"EM"===t.tagName&&1===a.childNodes.length&&"P"===a.tagName&&(e.className="button secondary",a.classList.add("button-container")))}}))}function decorateIcon(e,t="",a=""){const o=Array.from(e.classList).find((e=>e.startsWith("icon-"))).substring(5),n=document.createElement("img");n.dataset.iconName=o,n.src=`${window.hlx.codeBasePath}${t}/icons/${o}.svg`,n.alt=a,n.loading="lazy",e.append(n)}function decorateIcons(e,t=""){[...e.querySelectorAll("span.icon")].forEach((e=>{decorateIcon(e,t)}))}function decorateSections(e){e.querySelectorAll(":scope > div").forEach((e=>{const t=[];let a=!1;[...e.children].forEach((e=>{if("DIV"===e.tagName||!a){const o=document.createElement("div");t.push(o),a="DIV"!==e.tagName,a&&o.classList.add("default-content-wrapper")}t[t.length-1].append(e)})),t.forEach((t=>e.append(t))),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none";const o=e.querySelector("div.section-metadata");if(o){const t=readBlockConfig(o);Object.keys(t).forEach((a=>{if("style"===a){t.style.split(",").filter((e=>e)).map((e=>toClassName(e.trim()))).forEach((t=>e.classList.add(t)))}else e.dataset[toCamelCase(a)]=t[a]})),o.parentNode.remove()}}))}async function fetchPlaceholders(e="default"){return window.placeholders=window.placeholders||{},window.placeholders[e]||(window.placeholders[e]=new Promise((t=>{fetch(`${"default"===e?"":e}`).then((e=>e.ok?e.json():{})).then((a=>{const o={};a.data.filter((e=>e.Key)).forEach((e=>{o[toCamelCase(e.Key)]=e.Text})),window.placeholders[e]=o,t(window.placeholders[e])})).catch((()=>{window.placeholders[e]={},t(window.placeholders[e])}))}))),window.placeholders[`${e}`]}function updateSectionsStatus(e){const t=[...e.querySelectorAll(":scope > div.section")];for(let e=0;e<t.length;e+=1){const a=t[e];if("loaded"!==a.dataset.sectionStatus){if(a.querySelector('.block[data-block-status="initialized"], .block[data-block-status="loading"]')){a.dataset.sectionStatus="loading";break}a.dataset.sectionStatus="loaded",a.style.display=null}}}function buildBlock(e,t){const a=Array.isArray(t)?t:[[t]],o=document.createElement("div");return o.classList.add(e),a.forEach((e=>{const t=document.createElement("div");e.forEach((e=>{const a=document.createElement("div");(e.elems?e.elems:[e]).forEach((e=>{e&&("string"==typeof e?a.innerHTML+=e:a.appendChild(e))})),t.appendChild(a)})),o.appendChild(t)})),o}async function loadBlock(e){const t=e.dataset.blockStatus;if("loading"!==t&&"loaded"!==t){e.dataset.blockStatus="loading";const{blockName:t}=e.dataset;try{const a=loadCSS(`${window.hlx.codeBasePath}/blocks/${t}/${t}.css`),o=new Promise((a=>{(async()=>{try{const a=await import(`${window.hlx.codeBasePath}/blocks/${t}/${t}.js`);a.default&&await a.default(e)}catch(e){console.log(`failed to load module for ${t}`,e)}a()})()}));await Promise.all([a,o])}catch(e){console.log(`failed to load block ${t}`,e)}e.dataset.blockStatus="loaded"}return e}async function loadBlocks(e){updateSectionsStatus(e);const t=[...e.querySelectorAll("div.block")];for(let a=0;a<t.length;a+=1)await loadBlock(t[a]),updateSectionsStatus(e)}function decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t,e.dataset.blockStatus="initialized";e.parentElement.classList.add(`${t}-wrapper`);const a=e.closest(".section");a&&a.classList.add(`${t}-container`)}}function decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(decorateBlock)}async function loadHeader(e){const t=buildBlock("header","");return e.append(t),decorateBlock(t),loadBlock(t)}async function loadFooter(e){const t=buildBlock("footer","");return e.append(t),decorateBlock(t),loadBlock(t)}async function waitForLCP(e){const t=document.querySelector(".block");t&&e.includes(t.dataset.blockName)&&await loadBlock(t),document.body.style.display=null;const a=document.querySelector("main img");await new Promise((e=>{a&&!a.complete?(a.setAttribute("loading","eager"),a.addEventListener("load",e),a.addEventListener("error",e)):e()}))}init();export{buildBlock,createOptimizedPicture,decorateBlock,decorateBlocks,decorateButtons,decorateIcons,decorateSections,decorateTemplateAndTheme,fetchPlaceholders,getMetadata,loadBlock,loadBlocks,loadCSS,loadFooter,loadHeader,loadScript,readBlockConfig,sampleRUM,setup,toCamelCase,toClassName,updateSectionsStatus,waitForLCP};